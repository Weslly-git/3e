<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Galaxia con Heart 3D </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at bottom, #020111 0%, #000 100%);
    font-family: Arial, sans-serif;
    cursor: grab;
  }

  #text {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    color: #ff99ff;
    font-size: 28px;
    font-weight: bold;
    text-shadow: 0 0 20px #ff99ff;
    z-index: 10;
  }

  .star {
    position: absolute;
    border-radius: 50%;
    background: white;
  }

  #heartCanvas {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none; /* Para que no interfiera con drag de galaxia */
    width: 150px;
    height: 150px;
    z-index: 5;
  }
</style>
</head>
<body>
<div id="text">Te amo, Maylin </div>

<canvas id="heartCanvas"></canvas>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/loaders/GLTFLoader.js"></script>

<script>
// === Galaxia HTML/CSS ===
const starCount = 400;
const stars = [];

let centerX = window.innerWidth/2;
let centerY = window.innerHeight/2;
let mouseX = centerX;
let mouseY = centerY;
let offsetX = 0;
let offsetY = 0;
let isDragging = false;

// Crear estrellas
for(let i=0;i<starCount;i++){
    const star = document.createElement('div');
    star.className = 'star';
    document.body.appendChild(star);

    const distance = Math.random()*500 + 50;
    const size = Math.max(0.5, 3 - distance/200);
    star.style.width = star.style.height = size + 'px';
    star.style.opacity = (500 - distance)/500;

    stars.push({
        el: star,
        x: (Math.random()-0.5)*window.innerWidth,
        y: (Math.random()-0.5)*window.innerHeight,
        z: distance
    });
}

// Arrastrar galaxia
window.addEventListener('mousedown', e => { isDragging = true; mouseX = e.clientX; mouseY = e.clientY; document.body.style.cursor='grabbing'; });
window.addEventListener('mouseup', e => { isDragging = false; document.body.style.cursor='grab'; });
window.addEventListener('mousemove', e => {
    if(isDragging){
        offsetX = e.clientX - mouseX;
        offsetY = e.clientY - mouseY;
        mouseX = e.clientX;
        mouseY = e.clientY;
    }
});

// Animaci贸n galaxia
function animateStars(){
    for(let i=0;i<stars.length;i++){
        let s = stars[i];
        const factor = 0.0005 * s.z;
        s.x += s.x*factor + offsetX*0.01;
        s.y += s.y*factor + offsetY*0.01;

        if(s.x < -centerX || s.x > centerX || s.y < -centerY || s.y > centerY){
            s.x = (Math.random()-0.5)*window.innerWidth;
            s.y = (Math.random()-0.5)*window.innerHeight;
            s.z = Math.random()*500 + 50;
        }

        const scale = Math.max(0.5, 3 - s.z/200);
        s.el.style.width = s.el.style.height = scale + 'px';
        s.el.style.opacity = (500 - s.z)/500;
        s.el.style.left = centerX + s.x + 'px';
        s.el.style.top = centerY + s.y + 'px';
    }
    offsetX *= 0.9;
    offsetY *= 0.9;
    requestAnimationFrame(animateStars);
}
animateStars();
window.addEventListener('resize', ()=>{
    centerX = window.innerWidth/2;
    centerY = window.innerHeight/2;
});

// === Coraz贸n 3D con WebGL ===
const canvas = document.getElementById('heartCanvas');
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
camera.position.z = 3;

const renderer = new THREE.WebGLRenderer({canvas: canvas, alpha: true, antialias:true});
renderer.setSize(150, 150);

// Luz
const ambientLight = new THREE.AmbientLight(0xff99ff, 1);
scene.add(ambientLight);
const pointLight = new THREE.PointLight(0xffffff, 1);
pointLight.position.set(5,5,5);
scene.add(pointLight);

// Cargar Heart.glb
const loader = new THREE.GLTFLoader();
let heartObj;
loader.load("Img/Heart.glb", function(gltf){
    heartObj = gltf.scene;
    heartObj.scale.set(1.2,1.2,1.2);
    scene.add(heartObj);
}, undefined, function(error){
    console.error("Error cargando Heart.glb:", error);
});

// Animaci贸n coraz贸n
function animateHeart(){
    requestAnimationFrame(animateHeart);
    if(heartObj) heartObj.rotation.y += 0.01;
    renderer.render(scene, camera);
}
animateHeart();
</script>
</body>
</html>




